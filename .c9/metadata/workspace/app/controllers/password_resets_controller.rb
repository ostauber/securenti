{"filter":false,"title":"password_resets_controller.rb","tooltip":"/app/controllers/password_resets_controller.rb","undoManager":{"mark":1,"position":1,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":0},"end":{"row":8,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":8,"column":0},"end":{"row":8,"column":12}},"text":"  def update"},{"action":"insertText","range":{"start":{"row":8,"column":12},"end":{"row":9,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":9,"column":0},"end":{"row":26,"column":0}},"lines":["    if @user.password_reset_expired?","      flash[:danger] = \"Password reset has expired.\"","      redirect_to new_password_reset_url","    elsif @user.update_attributes(user_params)","      if (params[:user][:password].blank? &&","          params[:user][:password_confirmation].blank?)","        flash.now[:danger] = \"Password/confirmation can't be blank\"","        render 'edit'","      else","        flash[:success] = \"Password has been reset.\"","        log_in @user","        redirect_to @user","      end","    else","      render 'edit'","    end","  end"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":26,"column":0},"end":{"row":26,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1415376964922,"hash":"34d66d110d7bee30bfa1b38a63a975a7d082f7a2"}